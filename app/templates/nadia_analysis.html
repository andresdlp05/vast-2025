{% extends "base.html" %}
{% block title %}Analysis of Nadia Conti{% endblock %}

{% block content %}
<div class="container mx-auto p-6">
  <h1 class="text-2xl font-bold mb-4">Analysis of Nadia Conti</h1>
  <p class="mb-6">Investigation into Nadia Conti's activities to evaluate Clepper's suspicions of illegal behavior. This analysis examines communication patterns, relationships, and behavioral indicators.</p>

  <!-- Executive Summary -->
  <div id="executive-summary" class="bg-gray-50 p-4 rounded mb-6">
    <h2 class="text-xl font-semibold mb-2">Executive Summary</h2>
    <div class="grid grid-cols-3 gap-4 text-center">
      <div>
        <p class="text-gray-600">Total Communications</p>
        <p id="total-communications" class="text-2xl font-bold">0</p>
      </div>
      <div>
        <p class="text-gray-600">Suspicion Score</p>
        <p id="suspicion-score" class="text-2xl font-bold">0</p>
      </div>
      <div>
        <p class="text-gray-600">Risk Assessment</p>
        <p id="recommendation" class="text-2xl font-bold">Unknown</p>
      </div>
    </div>
  </div>

  <!-- Tab navigation -->
  <ul class="flex border-b mb-4">
    <li><a href="#" class="analysis-tab active px-4 py-2 border-b-2 border-blue-500" data-tab="timeline">Communication Timeline</a></li>
    <li><a href="#" class="analysis-tab px-4 py-2 text-gray-600 hover:text-gray-800" data-tab="network">Network Analysis</a></li>
    <li><a href="#" class="analysis-tab px-4 py-2 text-gray-600 hover:text-gray-800" data-tab="patterns">Behavioral Patterns</a></li>
    <li><a href="#" class="analysis-tab px-4 py-2 text-gray-600 hover:text-gray-800" data-tab="evidence">Suspicious Evidence</a></li>
  </ul>

  <!-- Timeline Tab -->
  <div id="timeline-tab" class="tab-content">
    <h3 class="text-lg font-semibold mb-2">Communication Timeline</h3>
    <div class="grid grid-cols-2 gap-6">
      <div>
        <h4 class="font-medium mb-1">Hourly Communication Pattern</h4>
        <div id="hourly-chart" class="bg-white p-4 rounded shadow">Loading chart...</div>
      </div>
      <div>
        <h4 class="font-medium mb-1">Timeline Events</h4>
        <div id="timeline-events" class="bg-white p-4 rounded shadow">Loading events...</div>
      </div>
    </div>
  </div>

  <!-- Network Tab -->
  <div id="network-tab" class="tab-content hidden">
    <h3 class="text-lg font-semibold mb-2">Communication Network</h3>
    <div id="network-graph" class="bg-white p-4 rounded shadow mb-4" style="height: 400px;">Loading network...</div>
    <h4 class="font-medium mb-1">Key Contacts</h4>
    <div id="contacts-list" class="bg-white p-4 rounded shadow">Loading contacts...</div>
  </div>

  <!-- Patterns Tab -->
  <div id="patterns-tab" class="tab-content hidden">
    <h3 class="text-lg font-semibold mb-2">Behavioral Patterns</h3>
    <div class="grid grid-cols-3 gap-6">
      <div>
        <h4 class="font-medium mb-1">Communication Timing</h4>
        <div id="timing-chart" class="bg-white p-4 rounded shadow">Loading timing chart...</div>
      </div>
      <div>
        <h4 class="font-medium mb-1">Keyword Analysis</h4>
        <div id="keyword-chart" class="bg-white p-4 rounded shadow">Loading keyword chart...</div>
      </div>
      <div>
        <h4 class="font-medium mb-1">Authority-Related Communications</h4>
        <div id="authority-analysis" class="bg-white p-4 rounded shadow">Loading authority analysis...</div>
      </div>
    </div>
  </div>

  <!-- Evidence Tab -->
  <div id="evidence-tab" class="tab-content hidden">
    <h3 class="text-lg font-semibold mb-2">Suspicious Evidence</h3>
    <div>
      <h4 class="font-medium mb-1">Suspicion Indicators</h4>
      <div id="suspicion-indicators" class="bg-white p-4 rounded shadow mb-4">Loading indicators...</div>
    </div>
    <div>
      <h4 class="font-medium mb-1">Most Suspicious Messages</h4>
      <div id="suspicious-messages" class="bg-white p-4 rounded shadow">Loading messages...</div>
    </div>
  </div>

  <!-- Conclusion -->
  <div id="conclusion" class="mt-6 italic text-gray-700">Analysis results will appear here after data loading...</div>
</div>

<script src="{{ url_for('static', filename='js/nadia_analysis.js') }}"></script>
<script>
  document.addEventListener('DOMContentLoaded', init_nadia_analysis);
</script>
{% endblock %}
